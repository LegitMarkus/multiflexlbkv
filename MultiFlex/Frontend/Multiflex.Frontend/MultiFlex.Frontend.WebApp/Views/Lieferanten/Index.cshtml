@{
    ViewData["Title"] = "Lieferanten";
    //Layout = "~/Views/Shared/_Layout.cshtml";
    //Controller = "LieferantenController";

    var test = new List<string>();
}

<div class="text-center">
    <h1>@ViewData["Title"]</h1>

    <center><div class="w-75" id="table_div"></div></center>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        const { ipcRenderer } = require("electron");
        document.addEventListener('DOMContentLoaded', pageLoaded);

        ipcRenderer.on('getLieferant-reply', (event, arg) => {
            let lieferant = JSON.parse(arg);
            //alert("geht");
            google.charts.load('current', {'packages':['table']});
            google.charts.setOnLoadCallback(drawTable);

            function drawTable() {
                var lieferanten = [];
                for (var i = 0; i < lieferant.length; i++){
                   var data = [lieferant[i]["name"], 'Testmaterial', lieferant[i]["weblink"], lieferant[i]["lieferzeit"]];
                   lieferanten.push(data);
                }
                //alert("geht");
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Name');
                data.addColumn('string', 'Material');
                data.addColumn('string', 'Weblink');
                data.addColumn('number', 'Lieferzeit');
                //alert("geht1.5");
                data.addRows(lieferanten);

                //data.addRows([
                //  ['Mike',  {v: 10000, f: '$10,000'}, 1],
                //  ['Jim',   {v:8000,   f: '$8,000'},  1],
                //  ['Alice', {v: 12500, f: '$12,500'}, 1],
                //  ['Bob',   {v: 7000,  f: '$7,000'},  1]
                //]);


                var table = new google.visualization.Table(document.getElementById('table_div'));

                table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
                //alert("geht2");
          }
      });

        function pageLoaded(){
            ipcRenderer.send('loadLieferanten');
        }
    </script>

</div>

